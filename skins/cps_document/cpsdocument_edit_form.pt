<tal:block define="doc here/getContent;
                   validate python: request.has_key('cpsdocument_edit_button');
                   edit_request python: validate and request or nothing;
                   res python: doc.renderEditDetailed(request=edit_request, proxy=here);
                   global rendered_main python: res[0];
                   rendered_ok python: res[1];
                   global portal_status_message python: validate and (rendered_ok and 'psm_content_changed' or 'psm_content_error') or '';
                " />
<metal:block use-macro="here/content_lib/macros/master">
  <metal:block fill-slot="css_slot">
    <style type="text/css"
      tal:content="string:@import url(${base_url}calendar-win2k-1.css);"></style>
    <script type="text/javascript" src="calendar.js"
      tal:attributes="src string:${base_url}calendar.js"></script>

    <script type="text/javascript" src="lang/calendar-en.js"
      tal:define="local cpsmcat/get_selected_language"
      tal:attributes="src string:${base_url}lang/calendar-${local}.js"></script>
    <script type="text/javascript" src="calendar-setup.js"
      tal:attributes="src string:${base_url}calendar-setup.js"></script>
  </metal:block>

  <metal:block fill-slot="header">
    <h1 i18n:translate="">Edit <span i18n:name="title"
      tal:content="here/title_or_id">Page Title</span></h1>
    <div metal:use-macro="here/content_lib/macros/byline">By Me</div>
  </metal:block>

  <metal:block fill-slot="main">
    <div tal:replace="structure rendered_main" />
  </metal:block>

</metal:block>
